import{r,j as e,a as fe}from"./react-c28024f0.js";import{c as je}from"./react-dom-1dc1d69f.js";import{L as X,B as be}from"./react-router-dom-4931a9bb.js";import{d as G}from"./dayjs-f4da6c40.js";import{i as ye,P as ve,g as Ce,a as we,I as Se,b as Z,s as De,d as ke,R as Le,m as Re,c as Pe,e as _e,f as Oe,Q as Ae,h as Ie,j as He}from"./@firebase-972978c9.js";import"./firebase-eb5e2097.js";import{s as T,B as k,M as Ee,a as Y,T as Ue,A as $e,C as I,S as L,b as p,P as F,c as R,D as Q,d as J,e as c,f as Be,G as w,g as Ne,h as Te,i as Fe,j as K,k as D,l as We,m as B,I as ze,n as Me,o as qe,p as Ge,q as Ye,r as Qe,t as Je,u as Ke,v as Xe,L as Ze,w as Ve,x as et}from"./@mui-8f6308a4.js";import{a as H,d as V,e as tt,f as O}from"./react-router-7d4f7901.js";import"./@babel-b0033d5b.js";import"./scheduler-765c72db.js";import"./@remix-run-d753ad9e.js";import"./tslib-6635c9de.js";import"./idb-81bdbf9b.js";import"./@emotion-f260de4a.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./stylis-79144faa.js";import"./clsx-1229b3e0.js";import"./prop-types-8086af9d.js";import"./react-transition-group-9d20211a.js";import"./dom-helpers-9a525042.js";import"./@popperjs-f3391c26.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();const st=(n,s)=>{switch(s.type){case"LOGIN":return{currentUser:s.payload,userIsLogin:!0};case"LOGOUT":return{currentUser:null,userIsLogin:!1};default:return n}},ee={currentUser:JSON.parse(localStorage.getItem("user"))||null,userIsLogin:!1},E=r.createContext(ee),nt=({children:n})=>{const[s,a]=r.useReducer(st,ee);return r.useEffect(()=>{localStorage.setItem("user",JSON.stringify(s.currentUser))},[s.currentUser]),e.jsx(E.Provider,{value:{user:s.currentUser,userIsLogin:s.userIsLogin,dispatch:a},children:n})},rt=function(n){return n.split(" ").map(t=>t[0].toUpperCase()+t.substring(1)).join(" ")},$=function(n){return n.toISOString().slice(0,10)},te=new Date,se=new Date,ne=new Date;se.setDate(te.getDate()+14);ne.setDate(te.getDate()+20);const W={destination:"",checkin:$(se),checkout:$(ne),numberOfAdults:1,numberOfRooms:1},_=r.createContext(W),at=(n,s)=>{switch(s.type){case"new_search":return s.payload;case"reset_search":return W;default:return n}},it=({children:n})=>{const[s,a]=r.useReducer(at,W);return e.jsx(_.Provider,{value:{destination:s.destination,checkin:s.checkin,checkout:s.checkout,numberOfAdults:s.numberOfAdults,numberOfRooms:s.numberOfRooms,dispatch:a},children:n})},ot={apiKey:"AIzaSyBiFhhW-J1y2hD9BwQu9Q9CXQtjBdSH_Uk",authDomain:"bookingia.firebaseapp.com",projectId:"bookingia",storageBucket:"bookingia.appspot.com",messagingSenderId:"226932601631",appId:"1:226932601631:web:83b2caf26748140f07762a"},z=ye(ot),M=ve(z),A=Ce(z),ct=we(z),lt=T(k)(({})=>({background:"#e0e0e0",color:"#212121"}));function dt({hotels:n=[]}){const s=H(),[a,u]=r.useState(null),t=!!a,{checkin:i,checkout:d,numberOfAdults:l,numberOfRooms:h,dispatch:m}=r.useContext(_),x=o=>{u(o.currentTarget)},g=()=>{u(null)},b=(o,j)=>{m({type:"new_search",payload:{destination:o,checkin:i,checkout:d,numberOfAdults:l,numberOfRooms:h}}),s(`/hotel/${j}`)};return e.jsxs(e.Fragment,{children:[e.jsx(lt,{id:"favorites-button","aria-controls":t?"favorites-menu":void 0,"aria-haspopup":"true","aria-expanded":t?"true":void 0,onClick:x,variant:"contained",children:"Favorites"}),e.jsx(Ee,{id:"favorites-menu",anchorEl:a,open:t,onClose:g,MenuListProps:{"aria-labelledby":"favorites-button"},sx:{marginTop:1},children:n.length<1?e.jsx(Y,{children:"No Hotels added"}):n.map(o=>e.jsx(Y,{onClick:()=>b(o.cityName,o.id),children:o.hotelName},o.id))})]})}const N=T(k)(()=>({background:"#e0e0e0",color:"#212121"})),ut=T(Ue)(({theme:n})=>({alignItems:"flex-start",paddingTop:n.spacing(2),paddingBottom:n.spacing(2),display:"flex",flexDirection:"column",gap:n.spacing(3),"@media all":{minHeight:150}}));function ht(){const n=H(),{userIsLogin:s,dispatch:a}=r.useContext(E),{destination:u,checkin:t,checkout:i,numberOfAdults:d,numberOfRooms:l,dispatch:h}=r.useContext(_),[m,x]=r.useState(""),[g,b]=r.useState(t),[o,j]=r.useState(i),[y,f]=r.useState(d),[S,U]=r.useState(l),[re,ae]=r.useState([]),ie=()=>{n("/login")},oe=()=>{n("/register")},ce=()=>{De(A).then(()=>{a({type:"LOGOUT"}),n("/")}).catch(v=>{console.log(v)})},le=v=>{const C=v.target.value;x(C)},de=v=>{const C=$(v.$d);b(C)},ue=v=>{const C=$(v.$d);j(C)},he=v=>{const C=v.target.value;C!==""&&f(Number(C))},me=v=>{const C=v.target.value;C!==""&&U(Number(C))},xe=()=>{m!==""&&(h({type:"new_search",payload:{destination:m,checkin:g,checkout:o,numberOfAdults:y,numberOfRooms:S}}),n(`/hotels/${m}`))};return r.useEffect(()=>{u.toLowerCase()!=m.toLowerCase()&&x(u)},[u]),r.useEffect(()=>{if(s){const v=A.currentUser,C=Se(Z(M,"users",v.uid),pe=>{const ge=pe.data().favorites;ae(ge)});return()=>C()}},[s]),e.jsx($e,{position:"sticky",children:e.jsx(I,{maxWidth:"lg",children:e.jsxs(ut,{disableGutters:!0,children:[e.jsxs(L,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",children:[e.jsx(X,{to:"/",style:{textDecoration:"none",color:"inherit"},children:e.jsx(p,{variant:"h3",children:"Bookingia"})}),e.jsxs(L,{spacing:2,direction:"row",children:[!s&&e.jsx(N,{variant:"contained",onClick:oe,children:"Register"}),!s&&e.jsx(N,{variant:"contained",onClick:ie,children:"Login"}),s&&e.jsx(dt,{hotels:re}),s&&e.jsx(N,{variant:"contained",onClick:ce,children:"Logout"})]})]}),e.jsxs(F,{elevation:2,sx:{width:"100%",py:"15px",px:"10px",display:"flex",justifyContent:"space-between"},children:[e.jsx(R,{required:!0,label:"Destination",size:"small",onChange:le,value:m}),e.jsxs(L,{direction:"row",spacing:1,divider:e.jsx(Q,{orientation:"vertical",flexItem:!0}),children:[e.jsx(J,{label:"Check-in",slotProps:{textField:{size:"small",width:"50%"}},value:G(g),onChange:de,disablePast:!0}),e.jsx(J,{label:"Check-out",slotProps:{textField:{size:"small"}},value:G(o),onChange:ue,disablePast:!0})]}),e.jsxs(L,{direction:"row",spacing:1,divider:e.jsx(Q,{orientation:"vertical",flexItem:!0}),children:[e.jsx(R,{label:"adults",sx:{width:90},size:"small",value:y,onChange:he}),e.jsx(R,{label:"Rooms",sx:{width:90},size:"small",value:S,onChange:me})]}),e.jsx(k,{variant:"contained",onClick:xe,children:"Search"})]})]})})})}function P({cityName:n,imageURL:s}){const a=H(),{checkin:u,checkout:t,numberOfAdults:i,numberOfRooms:d,dispatch:l}=r.useContext(_),h=()=>{l({type:"new_search",payload:{destination:n,checkin:u,checkout:t,numberOfAdults:i,numberOfRooms:d}}),a(`/hotels/${n}`)};return e.jsx(c,{borderRadius:"10px",sx:{backgroundColor:"gray",background:`url(${s})`,backgroundSize:"cover",width:"217px",aspectRatio:"4/3",cursor:"pointer"},onClick:h,children:e.jsx(c,{borderRadius:"10px 10px 0px 0px",padding:1,sx:{backgroundColor:"black",opacity:"0.6"},children:e.jsx(p,{variant:"subtitle",color:"#fff",sx:{fontWeight:"bold",cursor:"defualt"},children:rt(n)})})})}function q(){return e.jsx(c,{sx:{display:"flex",justifyContent:"center",width:"100%",height:"100dvh"},color:"secondary",children:e.jsx(Be,{})})}function mt(){const[n,s]=r.useState([]),[a,u]=r.useState(!0);return r.useEffect(()=>{(async()=>{const i=[],d=[];try{(await ke(Le(Re(M,"cities_list")))).forEach(h=>{const m=h.data().city;i.push(Pe(_e(ct,`Cities/${m}_300x300.jpg`)).then(x=>(d.push({id:h.id,imageURL:x,...h.data()}),Promise.resolve({id:h.id,imageURL:x,...h.data()}))).then(()=>Promise.resolve("sucess")).catch(x=>{console.log(x)}))}),Promise.all(i).then(()=>{d.sort((h,m)=>{let x=h.city.toLowerCase(),g=m.city.toLowerCase();return x<g?-1:x>g?1:0}),s(d)})}catch(l){console.log(l)}u(!1)})()},[]),e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"lg",sx:{mt:"2rem"},children:a?e.jsx(q,{}):e.jsxs(c,{component:"main",children:[e.jsxs(c,{component:"section",id:"popular_destiantion_world",marginBottom:7,children:[e.jsx(c,{children:e.jsx(p,{variant:"h4",children:"Popular Destinations - World"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:n.map(t=>{if(!t.region)return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(c,{component:"section",id:"popular_destiantion_africa",marginBottom:7,children:[e.jsx(c,{children:e.jsx(p,{variant:"h4",children:"Popular Destinations - Africa"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:n.map(t=>{if(t.region==="africa")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(c,{component:"section",id:"popular_destiantion_asia",marginBottom:7,children:[e.jsx(c,{children:e.jsx(p,{variant:"h4",children:"Popular Destinations - Asia"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:n.map(t=>{if(t.region==="asia")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(c,{component:"section",id:"popular_destiantion_europe",marginBottom:7,children:[e.jsx(c,{children:e.jsx(p,{variant:"h4",children:"Popular Destinations - Europe"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:n.map(t=>{if(t.region==="europe")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(c,{component:"section",id:"popular_destiantion_northamerica",marginBottom:7,children:[e.jsx(c,{children:e.jsx(p,{variant:"h4",children:"Popular Destinations - North America"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:n.map(t=>{if(t.region==="north america")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(c,{component:"section",id:"popular_destiantion_southamerica",marginBottom:7,children:[e.jsx(c,{children:e.jsx(p,{variant:"h4",children:"Popular Destinations - South America"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:n.map(t=>{if(t.region==="south america")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]})]})})})}function xt({roomsDetails:n,hotelURL:s}){return e.jsx(Ne,{component:F,children:e.jsxs(Te,{sx:{width:"100%"},"aria-label":"simple table",children:[e.jsx(Fe,{children:e.jsxs(K,{children:[e.jsx(D,{sx:{fontWeight:"bold"},children:"Room Type"}),e.jsx(D,{sx:{fontWeight:"bold"},children:"Deposit Required"}),e.jsx(D,{sx:{fontWeight:"bold"},children:"Price"}),e.jsx(D,{})]})}),e.jsx(We,{children:n.map(a=>e.jsxs(K,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsxs(D,{component:"th",scope:"row",children:[`${a.name}`," ",e.jsx("br",{}),`Room Size: ${Math.trunc(a.room_surface_in_feet2)}ft`,e.jsx("sup",{children:"2"})]}),e.jsx(D,{children:a.deposit_required===1?"Yes":"No"}),e.jsx(D,{children:`${a.min_price.price} ${a.min_price.currency}`}),e.jsx(D,{children:e.jsx(k,{color:"secondary",variant:"outlined",children:e.jsx("a",{href:s,target:"_blank",rel:"noonpener",style:{textDecoration:"none",color:"inherit"},children:"Book Now"})})})]},a.block_id))})]})})}function pt(){const{id:n}=V(),{checkin:s,checkout:a,numberOfAdults:u,numberOfRooms:t}=r.useContext(_),[i,d]=r.useState(!0),[l,h]=r.useState({}),[m,x]=r.useState([]),[g,b]=r.useState([]),[o,j]=r.useState(!1);return r.useEffect(()=>{(async()=>{d(!0);try{const S=await(await fetch(`https://gethotelsdetails-xa4qpi447a-uc.a.run.app?hotel_id=${n}&rooms=${t}&adults=${u}&checkin=${s}&checkout=${a}`)).json();h(S.hotelData),x(S.hotelRoomData),b(S.hotelPicture)}catch{j(!0)}d(!1)})()},[n]),e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"lg",sx:{mt:"2rem"},children:i?e.jsx(q,{}):o?e.jsx(B,{severity:"error",children:"Error loading hotel info"}):e.jsxs(c,{component:"main",children:[e.jsxs(c,{children:[e.jsx(p,{variant:"h4",color:"secondary",sx:{fontWeight:"bold"},children:l.name}),e.jsx(p,{children:l.address}),e.jsx(p,{children:`${l.city}, ${l.zip}`}),e.jsx(p,{children:`${l.class} Stars`})]}),e.jsx(c,{children:e.jsx(ze,{sx:{width:"100%",height:"500px"},cols:4,children:g.map(y=>e.jsx(Me,{children:e.jsx("img",{src:y.url_max,srcSet:y.url_max,alt:"hotel Picture",width:"200",height:"auto"})},y.photo_id))})}),e.jsxs(c,{children:[e.jsx(p,{variant:"h5",sx:{my:4,fontWeight:"bold"},children:"Room Types"}),e.jsx(c,{children:m[0].total_blocks===0?e.jsx(p,{children:"No Rooms Available"}):e.jsx(xt,{roomsDetails:m[0].block,hotelURL:l.url})})]})]})})})}function gt({id:n,hotelName:s,hotelAddress:a,minPrice:u,currency:t,photoURL:i,hotelClass:d,distanceFromCenter:l,cityDistrict:h,hotelZipcode:m,cityName:x}){const{userIsLogin:g}=r.useContext(E),b=async()=>{const o=A.currentUser.uid,j=Z(M,"users",o);await Oe(j,{favorites:Ae({id:n,hotelName:s,cityName:x})})};return e.jsxs(qe,{sx:{display:"flex",padding:2,gap:2},children:[e.jsx(Ge,{component:"img",sx:{width:200,height:200},image:i,alt:"hotel picture",loading:"lazy"}),e.jsxs(c,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(Ye,{sx:{padding:0},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(p,{variant:"h5",color:"secondary",children:s}),e.jsxs(p,{sx:{fontWeight:"bold",fontSize:"1.2rem"},children:[d," Stars"]})]}),e.jsxs(c,{children:[e.jsx(p,{children:a}),e.jsxs(p,{children:[h,",",m]}),e.jsxs(p,{children:[l,"km From City Center"]})]})]}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",width:"200px",alignSelf:"flex-end",alignItems:"flex-end",gap:1},children:[e.jsxs(p,{sx:{fontWeight:"500",fontStyle:"italic",textAlign:"right"},children:["From ",`${u.toFixed(2)} ${t}`]}),e.jsxs(c,{display:"flex",gap:2,children:[e.jsx(k,{variant:"outlined",size:"medium",color:"secondary",onClick:b,sx:{display:g?"block":"none"},children:"Mark As Favorite"}),e.jsx(X,{to:`/hotel/${n}`,style:{textDecoration:"none",color:"inherit"},children:e.jsx(k,{variant:"contained",size:"medium",color:"secondary",sx:{color:"white"},children:"See Rooms"})})]})]})]})]})}function ft(){const{checkin:n,checkout:s,numberOfAdults:a,numberOfRooms:u}=r.useContext(_),{destination:t}=V(),[i,d]=r.useState(!0),[l,h]=r.useState(!1),[m,x]=r.useState([]),[g,b]=r.useState(1),[o,j]=r.useState(1),y=(f,S)=>{b(S)};return r.useEffect(()=>{(async()=>{d(!0);try{const U=await(await fetch(`https://gethotels-xa4qpi447a-uc.a.run.app?city=${t}&rooms=${u}&adults=${a}&checkin=${n}&checkout=${s}&page_number=${g}`)).json();x(U.hotelsData.result),j(Math.round(U.hotelsData.primary_count/20))}catch{h(!0)}d(!1)})()},[g,t]),e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"lg",sx:{mt:"2rem"},children:i?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[e.jsx(L,{spacing:4,children:l?e.jsx(B,{severity:"error",children:"Error loading hotels"}):m.map(f=>e.jsx(gt,{id:f.hotel_id,hotelName:f.hotel_name,hotelAddress:f.address,minPrice:f.min_total_price,currency:f.currencycode,photoURL:f.max_photo_url,hotelClass:f.class,distanceFromCenter:f.distance_to_cc,cityDistrict:f.district,hotelZipcode:f.zip,cityName:f.city_trans},f.hotel_id))}),e.jsx(c,{display:l?"none":"flex",sx:{justifyContent:"center",my:3},children:e.jsx(Qe,{count:o,page:g,onChange:y,size:"large"})})]})})})}function jt(){const[n,s]=r.useState(!1),[a,u]=r.useState(""),[t,i]=r.useState(""),[d,l]=r.useState(""),h=H(),{dispatch:m}=r.useContext(E),x=o=>{u(o.target.value.trim())},g=o=>{i(o.target.value.trim())},b=o=>{o.preventDefault(),s(!1),l(""),Ie(A,a,t).then(j=>{const y=j.user;m({type:"LOGIN",payload:y}),h("/")}).catch(j=>{l(j.message),s(!0)})};return e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"xs",sx:{pt:"2rem",minHeight:"calc(100vh - 250px)"},children:e.jsx("form",{onSubmit:b,children:e.jsxs(L,{gap:3,children:[e.jsx(R,{label:"Email",type:"email",onChange:x}),e.jsx(R,{label:"Password",type:"password",onChange:g}),n&&e.jsx(B,{severity:"error",children:d}),e.jsx(k,{size:"medium",variant:"contained",color:"secondary",type:"submit",children:"Login"})]})})})})}function bt(){const[n,s]=r.useState(!1),[a,u]=r.useState(""),[t,i]=r.useState(""),[d,l]=r.useState(""),h=H(),{dispatch:m}=r.useContext(E),x=o=>{u(o.target.value.trim())},g=o=>{i(o.target.value.trim())},b=o=>{o.preventDefault(),s(!1),l(""),He(A,a,t).then(j=>{const y=j.user;m({type:"LOGIN",payload:y}),h("/")}).catch(j=>{l(j.message),s(!0)})};return e.jsx(e.Fragment,{children:e.jsx(Je,{maxWidth:"xs",sx:{pt:"2rem",minHeight:"calc(100vh - 250px)"},children:e.jsx("form",{onSubmit:b,children:e.jsxs(L,{gap:3,children:[e.jsx(R,{label:"Email",type:"email",onChange:x}),e.jsx(R,{label:"Password",type:"password",onChange:g}),n&&e.jsx(B,{severity:"error",children:d}),e.jsx(k,{size:"medium",variant:"contained",color:"secondary",type:"submit",children:"Register"})]})})})})}function yt(){return e.jsx(F,{style:{background:"#f5f5f5",minHeight:"100vh"},children:e.jsxs(be,{children:[e.jsx(ht,{}),e.jsxs(tt,{children:[e.jsx(O,{path:"/",element:e.jsx(mt,{})}),e.jsx(O,{path:"/hotels/:destination",element:e.jsx(ft,{})}),e.jsx(O,{path:"/hotel/:id",element:e.jsx(pt,{})}),e.jsx(O,{path:"/login",element:e.jsx(jt,{})}),e.jsx(O,{path:"/register",element:e.jsx(bt,{})})]}),e.jsx(c,{component:"footer",sx:{height:"50px",backgroundColor:"#00695c",padding:3,marginTop:3},children:e.jsx(p,{align:"center",color:"white",children:"Marly Carre"})})]})})}const vt=Ke({palette:{mode:"light",primary:{main:"#00695c"},secondary:{main:"#ff6d00"}}});je.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(Xe,{theme:vt,children:e.jsx(Ze,{dateAdapter:Ve,children:e.jsx(it,{children:e.jsxs(nt,{children:[e.jsx(et,{}),e.jsx(yt,{})]})})})})}));
