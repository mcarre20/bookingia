import{r,j as e,a as ge}from"./react-c28024f0.js";import{c as fe}from"./react-dom-1dc1d69f.js";import{L as X,B as je}from"./react-router-dom-7a226a2d.js";import{d as G}from"./dayjs-f4da6c40.js";import{i as be,P as ye,g as ve,a as Ce,I as we,b as Z,s as Se,d as De,R as ke,m as Le,c as Re,e as Pe,f as _e,Q as Oe,h as Ae,j as Ie}from"./@firebase-972978c9.js";import"./firebase-eb5e2097.js";import{s as T,B as k,M as He,a as Y,T as Ee,A as Ue,C as I,S as L,b as g,P as F,c as R,D as Q,d as J,e as o,f as Ne,G as w,g as Be,h as $e,i as Te,j as K,k as D,l as Fe,m as B,I as We,n as ze,o as Me,p as qe,q as Ge,r as Ye,t as Qe,u as Je,v as Ke,L as Xe,w as Ze,x as Ve}from"./@mui-8f6308a4.js";import{a as H,d as et,e as tt,f as O}from"./react-router-c59e27cf.js";import"./@babel-b0033d5b.js";import"./scheduler-765c72db.js";import"./@remix-run-e5357272.js";import"./tslib-6635c9de.js";import"./idb-81bdbf9b.js";import"./@emotion-f260de4a.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./stylis-79144faa.js";import"./clsx-1229b3e0.js";import"./prop-types-8086af9d.js";import"./react-transition-group-9d20211a.js";import"./dom-helpers-9a525042.js";import"./@popperjs-f3391c26.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();const st=(s,n)=>{switch(n.type){case"LOGIN":return{currentUser:n.payload,userIsLogin:!0};case"LOGOUT":return{currentUser:null,userIsLogin:!1};default:return s}},V={currentUser:JSON.parse(localStorage.getItem("user"))||null,userIsLogin:!1},E=r.createContext(V),nt=({children:s})=>{const[n,a]=r.useReducer(st,V);return r.useEffect(()=>{localStorage.setItem("user",JSON.stringify(n.currentUser))},[n.currentUser]),e.jsx(E.Provider,{value:{user:n.currentUser,userIsLogin:n.userIsLogin,dispatch:a},children:s})},rt=function(s){return s.split(" ").map(t=>t[0].toUpperCase()+t.substring(1)).join(" ")},N=function(s){return s.toISOString().slice(0,10)},ee=new Date,te=new Date,se=new Date;te.setDate(ee.getDate()+14);se.setDate(ee.getDate()+20);const W={destination:"",checkin:N(te),checkout:N(se),numberOfAdults:1,numberOfRooms:1},_=r.createContext(W),at=(s,n)=>{switch(n.type){case"new_search":return n.payload;case"reset_search":return W;default:return s}},it=({children:s})=>{const[n,a]=r.useReducer(at,W);return e.jsx(_.Provider,{value:{destination:n.destination,checkin:n.checkin,checkout:n.checkout,numberOfAdults:n.numberOfAdults,numberOfRooms:n.numberOfRooms,dispatch:a},children:s})},ot={apiKey:"AIzaSyBiFhhW-J1y2hD9BwQu9Q9CXQtjBdSH_Uk",authDomain:"bookingia.firebaseapp.com",projectId:"bookingia",storageBucket:"bookingia.appspot.com",messagingSenderId:"226932601631",appId:"1:226932601631:web:83b2caf26748140f07762a"},z=be(ot),M=ye(z),A=ve(z),ct=Ce(z),lt=T(k)(({theme:s})=>({background:"#e0e0e0",color:"#212121"}));function dt({hotels:s=[]}){const n=H(),[a,l]=r.useState(null),t=!!a,{destination:i,checkin:d,checkout:c,numberOfAdults:h,numberOfRooms:p,dispatch:m}=r.useContext(_),f=u=>{l(u.currentTarget)},y=()=>{l(null)},x=(u,b)=>{m({type:"new_search",payload:{destination:u,checkin:d,checkout:c,numberOfAdults:h,numberOfRooms:p}}),n(`/hotel/${b}`)};return e.jsxs(e.Fragment,{children:[e.jsx(lt,{id:"favorites-button","aria-controls":t?"favorites-menu":void 0,"aria-haspopup":"true","aria-expanded":t?"true":void 0,onClick:f,variant:"contained",children:"Favorites"}),e.jsx(He,{id:"favorites-menu",anchorEl:a,open:t,onClose:y,MenuListProps:{"aria-labelledby":"favorites-button"},sx:{marginTop:1},children:s.length<1?e.jsx(Y,{children:"No Hotels added"}):s.map(u=>e.jsx(Y,{onClick:()=>x(u.cityName,u.id),children:u.hotelName},u.id))})]})}const $=T(k)(({theme:s})=>({background:"#e0e0e0",color:"#212121"})),ut=T(Ee)(({theme:s})=>({alignItems:"flex-start",paddingTop:s.spacing(2),paddingBottom:s.spacing(2),display:"flex",flexDirection:"column",gap:s.spacing(3),"@media all":{minHeight:150}}));function ht(){const s=H(),{userIsLogin:n,dispatch:a}=r.useContext(E),{destination:l,checkin:t,checkout:i,numberOfAdults:d,numberOfRooms:c,dispatch:h}=r.useContext(_),[p,m]=r.useState(""),[f,y]=r.useState(G(t)),[x,u]=r.useState(G(i)),[b,j]=r.useState(d),[S,U]=r.useState(c),[ne,re]=r.useState([]),ae=()=>{s("/login")},ie=()=>{s("/register")},oe=()=>{Se(A).then(()=>{a({type:"LOGOUT"}),s("/")}).catch(v=>{console.log(v)})},ce=v=>{const C=v.target.value;m(C)},le=v=>{const C=N(v.$d);y(C)},de=v=>{const C=N(v.$d);u(C)},ue=v=>{const C=v.target.value;C!==""&&j(Number(C))},he=v=>{const C=v.target.value;C!==""&&U(Number(C))},me=()=>{p!==""&&(h({type:"new_search",payload:{destination:p,checkin:f,checkout:x,numberOfAdults:b,numberOfRooms:S}}),s("/hotels"))};return r.useEffect(()=>{l.toLowerCase()!=p.toLowerCase()&&m(l)},[l]),r.useEffect(()=>{const v=A.currentUser,C=we(Z(M,"users",v.uid),xe=>{const pe=xe.data().favorites;re(pe)});return()=>C()},[]),e.jsx(Ue,{position:"sticky",children:e.jsx(I,{maxWidth:"lg",children:e.jsxs(ut,{disableGutters:!0,children:[e.jsxs(L,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",children:[e.jsx(X,{to:"/",style:{textDecoration:"none",color:"inherit"},children:e.jsx(g,{variant:"h3",children:"Bookingia"})}),e.jsxs(L,{spacing:2,direction:"row",children:[!n&&e.jsx($,{variant:"contained",onClick:ie,children:"Register"}),!n&&e.jsx($,{variant:"contained",onClick:ae,children:"Login"}),n&&e.jsx(dt,{hotels:ne}),n&&e.jsx($,{variant:"contained",onClick:oe,children:"Logout"})]})]}),e.jsxs(F,{elevation:2,sx:{width:"100%",py:"15px",px:"10px",display:"flex",justifyContent:"space-between"},children:[e.jsx(R,{required:!0,label:"Destination",size:"small",onChange:ce,value:p}),e.jsxs(L,{direction:"row",spacing:1,divider:e.jsx(Q,{orientation:"vertical",flexItem:!0}),children:[e.jsx(J,{label:"Check-in",slotProps:{textField:{size:"small",width:"50%"}},value:f,onChange:le,disablePast:!0}),e.jsx(J,{label:"Check-out",slotProps:{textField:{size:"small"}},value:x,onChange:de,disablePast:!0})]}),e.jsxs(L,{direction:"row",spacing:1,divider:e.jsx(Q,{orientation:"vertical",flexItem:!0}),children:[e.jsx(R,{label:"adults",sx:{width:90},size:"small",value:b,onChange:ue}),e.jsx(R,{label:"Rooms",sx:{width:90},size:"small",value:S,onChange:he})]}),e.jsx(k,{variant:"contained",onClick:me,children:"Search"})]})]})})})}function P({cityName:s,imageURL:n}){const a=H(),{checkin:l,checkout:t,numberOfAdults:i,numberOfRooms:d,dispatch:c}=r.useContext(_),h=()=>{c({type:"new_search",payload:{destination:s,checkin:l,checkout:t,numberOfAdults:i,numberOfRooms:d}}),a("/hotels")};return e.jsx(o,{borderRadius:"10px",sx:{backgroundColor:"gray",background:`url(${n})`,backgroundSize:"cover",width:"217px",aspectRatio:"4/3",cursor:"pointer"},onClick:h,children:e.jsx(o,{borderRadius:"10px 10px 0px 0px",padding:1,sx:{backgroundColor:"black",opacity:"0.6"},children:e.jsx(g,{variant:"subtitle",color:"#fff",sx:{fontWeight:"bold",cursor:"defualt"},children:rt(s)})})})}function q(){return e.jsx(o,{sx:{display:"flex",justifyContent:"center",width:"100%",height:"100dvh"},color:"secondary",children:e.jsx(Ne,{})})}function mt(){const[s,n]=r.useState([]),[a,l]=r.useState(!0);return r.useEffect(()=>{(async()=>{const i=[],d=[];try{(await De(ke(Le(M,"cities_list")))).forEach(h=>{const p=h.data().city;i.push(Re(Pe(ct,`Cities/${p}_300x300.jpg`)).then(m=>(d.push({id:h.id,imageURL:m,...h.data()}),Promise.resolve({id:h.id,imageURL:m,...h.data()}))).then(()=>Promise.resolve("sucess")).catch(m=>{console.log(m)}))}),Promise.all(i).then(()=>{d.sort((h,p)=>{let m=h.city.toLowerCase(),f=p.city.toLowerCase();return m<f?-1:m>f?1:0}),n(d)})}catch(c){console.log(c)}l(!1)})()},[]),e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"lg",sx:{mt:"2rem"},children:a?e.jsx(q,{}):e.jsxs(o,{component:"main",children:[e.jsxs(o,{component:"section",id:"popular_destiantion_world",marginBottom:7,children:[e.jsx(o,{children:e.jsx(g,{variant:"h4",children:"Popular Destinations - World"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:s.map(t=>{if(!t.region)return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(o,{component:"section",id:"popular_destiantion_africa",marginBottom:7,children:[e.jsx(o,{children:e.jsx(g,{variant:"h4",children:"Popular Destinations - Africa"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:s.map(t=>{if(t.region==="africa")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(o,{component:"section",id:"popular_destiantion_asia",marginBottom:7,children:[e.jsx(o,{children:e.jsx(g,{variant:"h4",children:"Popular Destinations - Asia"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:s.map(t=>{if(t.region==="asia")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(o,{component:"section",id:"popular_destiantion_europe",marginBottom:7,children:[e.jsx(o,{children:e.jsx(g,{variant:"h4",children:"Popular Destinations - Europe"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:s.map(t=>{if(t.region==="europe")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(o,{component:"section",id:"popular_destiantion_northamerica",marginBottom:7,children:[e.jsx(o,{children:e.jsx(g,{variant:"h4",children:"Popular Destinations - North America"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:s.map(t=>{if(t.region==="north america")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]}),e.jsxs(o,{component:"section",id:"popular_destiantion_southamerica",marginBottom:7,children:[e.jsx(o,{children:e.jsx(g,{variant:"h4",children:"Popular Destinations - South America"})}),e.jsx(w,{container:!0,spacing:2,paddingY:2,children:s.map(t=>{if(t.region==="south america")return e.jsx(w,{item:!0,children:e.jsx(P,{cityName:t.city,imageURL:t.imageURL},t.id)},t.id)})})]})]})})})}function xt({roomsDetails:s,hotelURL:n}){return e.jsx(Be,{component:F,children:e.jsxs($e,{sx:{width:"100%"},"aria-label":"simple table",children:[e.jsx(Te,{children:e.jsxs(K,{children:[e.jsx(D,{sx:{fontWeight:"bold"},children:"Room Type"}),e.jsx(D,{sx:{fontWeight:"bold"},children:"Deposit Required"}),e.jsx(D,{sx:{fontWeight:"bold"},children:"Price"}),e.jsx(D,{})]})}),e.jsx(Fe,{children:s.map(a=>e.jsxs(K,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsxs(D,{component:"th",scope:"row",children:[`${a.name}`," ",e.jsx("br",{}),`Room Size: ${Math.trunc(a.room_surface_in_feet2)}ft`,e.jsx("sup",{children:"2"})]}),e.jsx(D,{children:a.deposit_required===1?"Yes":"No"}),e.jsx(D,{children:`${a.min_price.price} ${a.min_price.currency}`}),e.jsx(D,{children:e.jsx(k,{color:"secondary",variant:"outlined",children:e.jsx("a",{href:n,target:"_blank",rel:"noonpener",style:{textDecoration:"none",color:"inherit"},children:"Book Now"})})})]},a.block_id))})]})})}function pt(){const{id:s}=et(),{checkin:n,checkout:a,numberOfAdults:l,numberOfRooms:t}=r.useContext(_),[i,d]=r.useState(!0),[c,h]=r.useState({}),[p,m]=r.useState([]),[f,y]=r.useState([]),[x,u]=r.useState(!1);return r.useEffect(()=>{(async()=>{d(!0);try{const S=await(await fetch(`https://gethotelsdetails-xa4qpi447a-uc.a.run.app?hotel_id=${s}&rooms=${t}&adults=${l}&checkin=${n}&checkout=${a}`)).json();h(S.hotelData),m(S.hotelRoomData),y(S.hotelPicture)}catch{u(!0)}d(!1)})()},[s]),e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"lg",sx:{mt:"2rem"},children:i?e.jsx(q,{}):x?e.jsx(B,{severity:"error",children:"Error loading hotel info"}):e.jsxs(o,{component:"main",children:[e.jsxs(o,{children:[e.jsx(g,{variant:"h4",color:"secondary",sx:{fontWeight:"bold"},children:c.name}),e.jsx(g,{children:c.address}),e.jsx(g,{children:`${c.city}, ${c.zip}`}),e.jsx(g,{children:`${c.class} Stars`})]}),e.jsx(o,{children:e.jsx(We,{sx:{width:"100%",height:"500px"},cols:4,children:f.map(b=>e.jsx(ze,{children:e.jsx("img",{src:b.url_max,srcSet:b.url_max,alt:"hotel Picture",width:"200",height:"auto"})},b.photo_id))})}),e.jsxs(o,{children:[e.jsx(g,{variant:"h5",sx:{my:4,fontWeight:"bold"},children:"Room Types"}),e.jsx(o,{children:p[0].total_blocks===0?e.jsx(g,{children:"No Rooms Available"}):e.jsx(xt,{roomsDetails:p[0].block,hotelURL:c.url})})]})]})})})}function gt({id:s,hotelName:n,hotelAddress:a,minPrice:l,currency:t,photoURL:i,hotelClass:d,distanceFromCenter:c,cityDistrict:h,hotelZipcode:p,cityName:m}){const{userIsLogin:f}=r.useContext(E),y=async()=>{const x=A.currentUser.uid,u=Z(M,"users",x);await _e(u,{favorites:Oe({id:s,hotelName:n,cityName:m})})};return e.jsxs(Me,{sx:{display:"flex",padding:2,gap:2},children:[e.jsx(qe,{component:"img",sx:{width:200,height:200},image:i,alt:"hotel picture",loading:"lazy"}),e.jsxs(o,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(Ge,{sx:{padding:0},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(g,{variant:"h5",color:"secondary",children:n}),e.jsxs(g,{sx:{fontWeight:"bold",fontSize:"1.2rem"},children:[d," Stars"]})]}),e.jsxs(o,{children:[e.jsx(g,{children:a}),e.jsxs(g,{children:[h,",",p]}),e.jsxs(g,{children:[c,"km From City Center"]})]})]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",width:"200px",alignSelf:"flex-end",alignItems:"flex-end",gap:1},children:[e.jsxs(g,{sx:{fontWeight:"500",fontStyle:"italic",textAlign:"right"},children:["From ",`${l.toFixed(2)} ${t}`]}),e.jsxs(o,{display:"flex",gap:2,children:[e.jsx(k,{variant:"outlined",size:"medium",color:"secondary",onClick:y,sx:{display:f?"block":"none"},children:"Mark As Favorite"}),e.jsx(X,{to:`/hotel/${s}`,style:{textDecoration:"none",color:"inherit"},children:e.jsx(k,{variant:"contained",size:"medium",color:"secondary",sx:{color:"white"},children:"See Rooms"})})]})]})]})]})}function ft(){const{destination:s,checkin:n,checkout:a,numberOfAdults:l,numberOfRooms:t}=r.useContext(_),[i,d]=r.useState(!0),[c,h]=r.useState(!1),[p,m]=r.useState([]),[f,y]=r.useState(1),[x,u]=r.useState(1),b=(j,S)=>{y(S)};return r.useEffect(()=>{(async()=>{try{const U=await(await fetch(`https://gethotels-xa4qpi447a-uc.a.run.app?city=${s}&rooms=${t}&adults=${l}&checkin=${n}&checkout=${a}&page_number=${f}`)).json();m(U.hotelsData.result),u(Math.round(U.hotelsData.primary_count/20))}catch{h(!0)}d(!1)})()},[f]),e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"lg",sx:{mt:"2rem"},children:i?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[e.jsx(L,{spacing:4,children:c?e.jsx(B,{severity:"error",children:"Error loading hotels"}):p.map(j=>e.jsx(gt,{id:j.hotel_id,hotelName:j.hotel_name,hotelAddress:j.address,minPrice:j.min_total_price,currency:j.currencycode,photoURL:j.max_photo_url,hotelClass:j.class,distanceFromCenter:j.distance_to_cc,cityDistrict:j.district,hotelZipcode:j.zip,cityName:j.city_trans},j.hotel_id))}),e.jsx(o,{display:c?"none":"flex",sx:{justifyContent:"center",my:3},children:e.jsx(Ye,{count:x,page:f,onChange:b,size:"large"})})]})})})}function jt(){const[s,n]=r.useState(!1),[a,l]=r.useState(""),[t,i]=r.useState(""),[d,c]=r.useState(""),h=H(),{dispatch:p}=r.useContext(E),m=x=>{l(x.target.value.trim())},f=x=>{i(x.target.value.trim())},y=x=>{x.preventDefault(),n(!1),c(""),Ae(A,a,t).then(u=>{const b=u.user;p({type:"LOGIN",payload:b}),h("/")}).catch(u=>{c(u.message),n(!0)})};return e.jsx(e.Fragment,{children:e.jsx(I,{maxWidth:"xs",sx:{pt:"2rem",minHeight:"calc(100vh - 250px)"},children:e.jsx("form",{onSubmit:y,children:e.jsxs(L,{gap:3,children:[e.jsx(R,{label:"Email",type:"email",onChange:m}),e.jsx(R,{label:"Password",type:"password",onChange:f}),s&&e.jsx(B,{severity:"error",children:d}),e.jsx(k,{size:"medium",variant:"contained",color:"secondary",type:"submit",children:"Login"})]})})})})}function bt(){const[s,n]=r.useState(!1),[a,l]=r.useState(""),[t,i]=r.useState(""),[d,c]=r.useState(""),h=H(),{dispatch:p}=r.useContext(E),m=x=>{l(x.target.value.trim())},f=x=>{i(x.target.value.trim())},y=x=>{x.preventDefault(),n(!1),c(""),Ie(A,a,t).then(u=>{const b=u.user;p({type:"LOGIN",payload:b}),h("/")}).catch(u=>{c(u.message),n(!0)})};return e.jsx(e.Fragment,{children:e.jsx(Qe,{maxWidth:"xs",sx:{pt:"2rem",minHeight:"calc(100vh - 250px)"},children:e.jsx("form",{onSubmit:y,children:e.jsxs(L,{gap:3,children:[e.jsx(R,{label:"Email",type:"email",onChange:m}),e.jsx(R,{label:"Password",type:"password",onChange:f}),s&&e.jsx(B,{severity:"error",children:d}),e.jsx(k,{size:"medium",variant:"contained",color:"secondary",type:"submit",children:"Register"})]})})})})}function yt(){return e.jsx(F,{style:{background:"#f5f5f5",minHeight:"100vh"},children:e.jsxs(je,{children:[e.jsx(ht,{}),e.jsxs(tt,{children:[e.jsx(O,{path:"/",element:e.jsx(mt,{})}),e.jsx(O,{path:"/hotels",element:e.jsx(ft,{})}),e.jsx(O,{path:"/hotel/:id",element:e.jsx(pt,{})}),e.jsx(O,{path:"/login",element:e.jsx(jt,{})}),e.jsx(O,{path:"/register",element:e.jsx(bt,{})})]}),e.jsx(o,{component:"footer",sx:{height:"50px",backgroundColor:"#00695c",padding:3,marginTop:3},children:e.jsx(g,{align:"center",color:"white",children:"Marly Carre"})})]})})}const vt=Je({palette:{mode:"light",primary:{main:"#00695c"},secondary:{main:"#ff6d00"}}});fe.createRoot(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(Ke,{theme:vt,children:e.jsx(Xe,{dateAdapter:Ze,children:e.jsx(it,{children:e.jsxs(nt,{children:[e.jsx(Ve,{}),e.jsx(yt,{})]})})})})}));
